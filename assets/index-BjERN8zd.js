var Ae=Object.defineProperty;var je=(e,t,l)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var oe=(e,t,l)=>(je(e,typeof t!="symbol"?t+"":t,l),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function l(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=l(r);fetch(r.href,o)}})();function I(){}function ke(e){return e()}function me(){return Object.create(null)}function T(e){e.forEach(ke)}function Pe(e){return typeof e=="function"}function V(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Le(e){return Object.keys(e).length===0}function p(e,t){e.appendChild(t)}function C(e,t,l){e.insertBefore(t,l||null)}function q(e){e.parentNode&&e.parentNode.removeChild(e)}function qe(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function $(e){return document.createElement(e)}function k(e){return document.createTextNode(e)}function P(){return k(" ")}function R(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function y(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function B(e){return e===""?null:+e}function Ne(e){return Array.from(e.childNodes)}function D(e,t){t=""+t,e.data!==t&&(e.data=t)}function L(e,t){e.value=t??""}function J(e,t,l,n){l==null?e.style.removeProperty(t):e.style.setProperty(t,l,n?"important":"")}function ge(e,t,l){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t){r.selected=!0;return}}(!l||t!==void 0)&&(e.selectedIndex=-1)}function Xe(e){const t=e.querySelector(":checked");return t&&t.__value}function Ye(e,t,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:l,cancelable:n})}let H;function G(e){H=e}function fe(){if(!H)throw new Error("Function called outside component initialization");return H}function Ce(e){fe().$$.on_mount.push(e)}function Re(e){fe().$$.after_update.push(e)}function Te(){const e=fe();return(t,l,{cancelable:n=!1}={})=>{const r=e.$$.callbacks[t];if(r){const o=Ye(t,l,{cancelable:n});return r.slice().forEach(s=>{s.call(e,o)}),!o.defaultPrevented}return!0}}const W=[],K=[];let U=[];const ue=[],Fe=Promise.resolve();let ce=!1;function We(){ce||(ce=!0,Fe.then(Oe))}function x(e){U.push(e)}function Ie(e){ue.push(e)}const ie=new Set;let F=0;function Oe(){if(F!==0)return;const e=H;do{try{for(;F<W.length;){const t=W[F];F++,G(t),Be(t.$$)}}catch(t){throw W.length=0,F=0,t}for(G(null),W.length=0,F=0;K.length;)K.pop()();for(let t=0;t<U.length;t+=1){const l=U[t];ie.has(l)||(ie.add(l),l())}U.length=0}while(W.length);for(;ue.length;)ue.pop()();ce=!1,ie.clear(),G(e)}function Be(e){if(e.fragment!==null){e.update(),T(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(x)}}function De(e){const t=[],l=[];U.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),U=t}const Z=new Set;let X;function _e(){X={r:0,c:[],p:X}}function be(){X.r||T(X.c),X=X.p}function A(e,t){e&&e.i&&(Z.delete(e),e.i(t))}function Y(e,t,l,n){if(e&&e.o){if(Z.has(e))return;Z.add(e),X.c.push(()=>{Z.delete(e),n&&(l&&e.d(1),n())}),e.o(t)}else n&&n()}function ee(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Se(e,t,l){const n=e.$$.props[t];n!==void 0&&(e.$$.bound[n]=l,l(e.$$.ctx[n]))}function ae(e){e&&e.c()}function te(e,t,l){const{fragment:n,after_update:r}=e.$$;n&&n.m(t,l),x(()=>{const o=e.$$.on_mount.map(ke).filter(Pe);e.$$.on_destroy?e.$$.on_destroy.push(...o):T(o),e.$$.on_mount=[]}),r.forEach(x)}function ne(e,t){const l=e.$$;l.fragment!==null&&(De(l.after_update),T(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Ue(e,t){e.$$.dirty[0]===-1&&(W.push(e),We(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function le(e,t,l,n,r,o,s=null,a=[-1]){const u=H;G(e);const i=e.$$={fragment:null,ctx:[],props:o,update:I,not_equal:r,bound:me(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:me(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};s&&s(i.root);let c=!1;if(i.ctx=l?l(e,t.props||{},(h,g,...M)=>{const _=M.length?M[0]:g;return i.ctx&&r(i.ctx[h],i.ctx[h]=_)&&(!i.skip_bound&&i.bound[h]&&i.bound[h](_),c&&Ue(e,h)),g}):[],i.update(),c=!0,T(i.before_update),i.fragment=n?n(i.ctx):!1,t.target){if(t.hydrate){const h=Ne(t.target);i.fragment&&i.fragment.l(h),h.forEach(q)}else i.fragment&&i.fragment.c();t.intro&&A(e.$$.fragment),te(e,t.target,t.anchor),Oe()}G(u)}class re{constructor(){oe(this,"$$");oe(this,"$$set")}$destroy(){ne(this,1),this.$destroy=I}$on(t,l){if(!Pe(l))return I;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const r=n.indexOf(l);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!Le(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ze="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ze);const ye=["#69cfdb","#d7a55b","#81a0f0","#c8c567","#da99df","#76d094","#ec8ba3","#53e0c5","#e29d81","#6bbae1","#a8cb7d","#aab2e3","#e9cd99","#dbabcc","#8dccb5","#b4bc8d"],de=e=>ye[e%ye.length];function Je(e){let t,l,n,r,o,s=Math.round(e[1])+"",a,u,i,c,h=Math.round(e[2])+"",g,M,_,v,d=Math.round(e[3])+"",w;return{c(){t=$("div"),l=$("canvas"),n=P(),r=$("div"),o=k("width: "),a=k(s),u=P(),i=$("br"),c=k(`
    height: `),g=k(h),M=P(),_=$("br"),v=k(`
    loop gap: `),w=k(d),y(l,"width",600),y(l,"height",400),y(r,"id","dimensions"),y(r,"class","svelte-ajx8qd"),y(t,"id","container"),y(t,"class","svelte-ajx8qd")},m(f,m){C(f,t,m),p(t,l),e[5](l),p(t,n),p(t,r),p(r,o),p(r,a),p(r,u),p(r,i),p(r,c),p(r,g),p(r,M),p(r,_),p(r,v),p(r,w)},p(f,[m]){m&2&&s!==(s=Math.round(f[1])+"")&&D(a,s),m&4&&h!==(h=Math.round(f[2])+"")&&D(g,h),m&8&&d!==(d=Math.round(f[3])+"")&&D(w,d)},i:I,o:I,d(f){f&&q(t),e[5](null)}}}function Ge(e,t,l){let{elements:n=[]}=t,r,o,s,a;function u(c=0,h=0,g=0,M=1){const _=r.getContext("2d");if(!_)throw new Error("Could not get 2d context");_.clearRect(0,0,r.width,r.height);let v=c,d=h,w=g-Math.PI/2;_.lineWidth=3;let f=v,m=d,b=v,j=d;for(const N of n){if(_.beginPath(),_.moveTo(v,d),_.strokeStyle=de(n.indexOf(N)),N.type==="straight"){const E=N.length*M,O=E*Math.cos(w),S=E*Math.sin(w);_.lineTo(v+O,d+S),v+=O,d+=S,f=Math.min(f,v),m=Math.min(m,d),b=Math.max(b,v),j=Math.max(j,d)}else{const E=N.radius*M;let O,S,Q;const he=N.angle>0,pe=N.angle*Math.PI/180;he?(O=v+E*Math.cos(w+Math.PI/2),S=d+E*Math.sin(w+Math.PI/2),Q=w-Math.PI/2):(O=v+E*Math.cos(w-Math.PI/2),S=d+E*Math.sin(w-Math.PI/2),Q=w+Math.PI/2);const se=Q+pe;_.arc(O,S,E,Q,se,!he),w+=pe,v=O+E*Math.cos(se),d=S+E*Math.sin(se),N.angle!==0&&(f=Math.min(f,O-Math.abs(E)),m=Math.min(m,S-Math.abs(E)),b=Math.max(b,O+Math.abs(E)),j=Math.max(j,S+Math.abs(E)))}_.stroke()}return{minX:f,minY:m,maxX:b,maxY:j,finalX:v,finalY:d}}Ce(()=>{const{minX:c,minY:h,maxX:g,maxY:M,finalX:_,finalY:v}=u(),d=Math.min((r.width-20)/(g-c),(r.height-20)/(M-h)),w=r.width-(g-c)*d,f=r.height-(M-h)*d;l(1,o=g-c),l(2,s=M-h),l(3,a=Math.sqrt(_*_+v*v)),u(-c*d+w/2,-h*d+3+f/2,0,d)});function i(c){K[c?"unshift":"push"](()=>{r=c,l(0,r)})}return e.$$set=c=>{"elements"in c&&l(4,n=c.elements)},[r,o,s,a,n,i]}class He extends re{constructor(t){super(),le(this,t,Ge,Je,V,{elements:4})}}function Ke(e){let t,l,n,r,o,s,a,u,i;return{c(){t=$("label"),l=k(`Radius:
      `),n=$("input"),r=P(),o=$("label"),s=k(`Angle:
      `),a=$("input"),y(n,"type","number"),y(n,"min","0"),y(n,"max","360"),y(n,"class","svelte-4u3d3q"),y(t,"class","svelte-4u3d3q"),y(a,"type","number"),y(a,"step",5),y(a,"class","svelte-4u3d3q"),y(o,"class","svelte-4u3d3q")},m(c,h){C(c,t,h),p(t,l),p(t,n),L(n,e[0].radius),C(c,r,h),C(c,o,h),p(o,s),p(o,a),L(a,e[0].angle),u||(i=[R(n,"input",e[6]),R(a,"input",e[7])],u=!0)},p(c,h){h&1&&B(n.value)!==c[0].radius&&L(n,c[0].radius),h&1&&B(a.value)!==c[0].angle&&L(a,c[0].angle)},d(c){c&&(q(t),q(r),q(o)),u=!1,T(i)}}}function Ve(e){let t,l,n,r,o;return{c(){t=$("label"),l=k(`Length:
      `),n=$("input"),y(n,"type","number"),y(n,"class","svelte-4u3d3q"),y(t,"class","svelte-4u3d3q")},m(s,a){C(s,t,a),p(t,l),p(t,n),L(n,e[0].length),r||(o=R(n,"input",e[5]),r=!0)},p(s,a){a&1&&B(n.value)!==s[0].length&&L(n,s[0].length)},d(s){s&&q(t),r=!1,o()}}}function Qe(e){let t,l,n=e[0].type+"",r,o,s,a,u,i,c,h,g,M,_,v;function d(m,b){return m[0].type==="straight"?Ve:Ke}let w=d(e),f=w(e);return{c(){t=$("fieldset"),l=$("legend"),r=k(n),o=P(),s=$("label"),a=k(`Type:
    `),u=$("select"),i=$("option"),i.textContent="Straight",c=$("option"),c.textContent="Bend",h=P(),f.c(),g=P(),M=$("button"),M.textContent="❌",J(l,"background-color",e[1]),y(l,"class","svelte-4u3d3q"),i.__value="straight",L(i,i.__value),c.__value="bend",L(c,c.__value),y(u,"class","svelte-4u3d3q"),e[0].type===void 0&&x(()=>e[4].call(u)),y(s,"class","svelte-4u3d3q"),y(M,"type","button"),y(M,"class","svelte-4u3d3q"),y(t,"class","svelte-4u3d3q")},m(m,b){C(m,t,b),p(t,l),p(l,r),p(t,o),p(t,s),p(s,a),p(s,u),p(u,i),p(u,c),ge(u,e[0].type,!0),p(t,h),f.m(t,null),p(t,g),p(t,M),_||(v=[R(u,"change",e[4]),R(u,"change",e[2]),R(M,"click",e[3])],_=!0)},p(m,[b]){b&1&&n!==(n=m[0].type+"")&&D(r,n),b&2&&J(l,"background-color",m[1]),b&1&&ge(u,m[0].type),w===(w=d(m))&&f?f.p(m,b):(f.d(1),f=w(m),f&&(f.c(),f.m(t,g)))},i:I,o:I,d(m){m&&q(t),f.d(),_=!1,T(v)}}}function Ze(e,t,l){const n=Te();let{element:r}=t,{colour:o}=t;function s(g){const M=g.target;l(0,r.type=M.value,r),r.type==="straight"?l(0,r.length=r.length??20,r):(l(0,r.radius=r.radius??20,r),l(0,r.angle=r.angle??0,r))}function a(){n("delete")}function u(){r.type=Xe(this),l(0,r)}function i(){r.length=B(this.value),l(0,r)}function c(){r.radius=B(this.value),l(0,r)}function h(){r.angle=B(this.value),l(0,r)}return e.$$set=g=>{"element"in g&&l(0,r=g.element),"colour"in g&&l(1,o=g.colour)},[r,o,s,a,u,i,c,h]}class xe extends re{constructor(t){super(),le(this,t,Ze,Qe,V,{element:0,colour:1})}}function ve(e,t,l){const n=e.slice();return n[3]=t[l],n[5]=l,n}function Me(e){let t,l=Math.round(z(e[3]))+"",n,r,o,s=Math.round(e[0].slice(0,e[5]+1).reduce(e[1],0))+"",a,u;return{c(){t=$("div"),n=k(l),r=P(),o=$("span"),a=k(s),u=P(),y(o,"class","running-total svelte-dm7apm"),J(t,"background-color",de(e[5])),J(t,"flex-grow",z(e[3])*3),y(t,"class","svelte-dm7apm")},m(i,c){C(i,t,c),p(t,n),p(t,r),p(t,o),p(o,a),p(t,u)},p(i,c){c&1&&l!==(l=Math.round(z(i[3]))+"")&&D(n,l),c&1&&s!==(s=Math.round(i[0].slice(0,i[5]+1).reduce(i[1],0))+"")&&D(a,s),c&1&&J(t,"flex-grow",z(i[3])*3)},d(i){i&&q(t)}}}function et(e){let t,l=ee(e[0]),n=[];for(let r=0;r<l.length;r+=1)n[r]=Me(ve(e,l,r));return{c(){t=$("div");for(let r=0;r<n.length;r+=1)n[r].c();y(t,"id","ribbon"),y(t,"class","svelte-dm7apm")},m(r,o){C(r,t,o);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(t,null)},p(r,[o]){if(o&1){l=ee(r[0]);let s;for(s=0;s<l.length;s+=1){const a=ve(r,l,s);n[s]?n[s].p(a,o):(n[s]=Me(a),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=l.length}},i:I,o:I,d(r){r&&q(t),qe(n,r)}}}function z(e){return e.type==="straight"?e.length:e.radius*Math.abs(e.angle)*Math.PI/180}function tt(e,t,l){let{elements:n=[]}=t;const r=(o,s)=>o+z(s);return e.$$set=o=>{"elements"in o&&l(0,n=o.elements)},[n,r]}class nt extends re{constructor(t){super(),le(this,t,tt,et,V,{elements:0})}}function lt(e){return e.map(t=>t.type==="straight"?`s${t.length}`:`b${t.angle}x${t.radius}`).join(",")}function rt(e){return e.split(",").map(t=>{if(t.startsWith("s"))return{type:"straight",length:parseInt(t.slice(1))};{const[l,n]=t.slice(1).split("x").map(parseFloat);return{type:"bend",angle:l,radius:n}}})}function $e(e,t,l){const n=e.slice();return n[6]=t[l],n[7]=t,n[8]=l,n}function we(e){let t,l,n,r,o;t=new He({props:{elements:e[0]}});function s(u){e[3](u)}let a={};return e[0]!==void 0&&(a.elements=e[0]),n=new nt({props:a}),K.push(()=>Se(n,"elements",s)),{c(){ae(t.$$.fragment),l=P(),ae(n.$$.fragment)},m(u,i){te(t,u,i),C(u,l,i),te(n,u,i),o=!0},p(u,i){const c={};i&1&&(c.elements=u[0]),t.$set(c);const h={};!r&&i&1&&(r=!0,h.elements=u[0],Ie(()=>r=!1)),n.$set(h)},i(u){o||(A(t.$$.fragment,u),A(n.$$.fragment,u),o=!0)},o(u){Y(t.$$.fragment,u),Y(n.$$.fragment,u),o=!1},d(u){u&&q(l),ne(t,u),ne(n,u)}}}function Ee(e){let t,l,n;function r(a){e[4](a,e[6],e[7],e[8])}function o(){return e[5](e[8])}let s={colour:de(e[8])};return e[6]!==void 0&&(s.element=e[6]),t=new xe({props:s}),K.push(()=>Se(t,"element",r)),t.$on("delete",o),{c(){ae(t.$$.fragment)},m(a,u){te(t,a,u),n=!0},p(a,u){e=a;const i={};!l&&u&1&&(l=!0,i.element=e[6],Ie(()=>l=!1)),t.$set(i)},i(a){n||(A(t.$$.fragment,a),n=!0)},o(a){Y(t.$$.fragment,a),n=!1},d(a){ne(t,a)}}}function st(e){let t,l,n,r=JSON.stringify(e[0]),o,s,a,u,i,c,h,g,M,_=we(e),v=ee(e[0]),d=[];for(let f=0;f<v.length;f+=1)d[f]=Ee($e(e,v,f));const w=f=>Y(d[f],1,1,()=>{d[f]=null});return{c(){t=$("main"),l=$("h1"),l.textContent="Wire Bending Planner",n=P(),_.c(),o=P(),s=$("h2"),s.textContent="Elements",a=P(),u=$("div");for(let f=0;f<d.length;f+=1)d[f].c();i=P(),c=$("button"),c.textContent="Add Element",y(l,"class","svelte-khljth"),y(u,"id","scroll-list"),y(u,"class","svelte-khljth"),y(c,"type","button"),y(t,"class","svelte-khljth")},m(f,m){C(f,t,m),p(t,l),p(t,n),_.m(t,null),p(t,o),p(t,s),p(t,a),p(t,u);for(let b=0;b<d.length;b+=1)d[b]&&d[b].m(u,null);p(t,i),p(t,c),h=!0,g||(M=R(c,"click",e[2]),g=!0)},p(f,[m]){if(m&1&&V(r,r=JSON.stringify(f[0]))?(_e(),Y(_,1,1,I),be(),_=we(f),_.c(),A(_,1),_.m(t,o)):_.p(f,m),m&3){v=ee(f[0]);let b;for(b=0;b<v.length;b+=1){const j=$e(f,v,b);d[b]?(d[b].p(j,m),A(d[b],1)):(d[b]=Ee(j),d[b].c(),A(d[b],1),d[b].m(u,null))}for(_e(),b=v.length;b<d.length;b+=1)w(b);be()}},i(f){if(!h){A(_);for(let m=0;m<v.length;m+=1)A(d[m]);h=!0}},o(f){Y(_),d=d.filter(Boolean);for(let m=0;m<d.length;m+=1)Y(d[m]);h=!1},d(f){f&&q(t),_.d(f),qe(d,f),g=!1,M()}}}function ot(e,t,l){let n=[];function r(i){l(0,n=n.filter((c,h)=>i!==h))}function o(){var c;if(((c=n[n.length-1])==null?void 0:c.type)==="straight"){let h;const g=n.filter(M=>M.type==="bend").slice(-1)[0];(g==null?void 0:g.type)==="bend"&&(h=g==null?void 0:g.radius),l(0,n=[...n,{type:"bend",radius:h??4,angle:0}])}else l(0,n=[...n,{type:"straight",length:20}])}Ce(()=>{const c=new URLSearchParams(location.search).get("elements");c&&l(0,n=rt(c))}),Re(()=>{const i=lt(n);history.replaceState({},"",`?elements=${i}`)});function s(i){n=i,l(0,n)}function a(i,c,h,g){h[g]=i,l(0,n)}return[n,r,o,s,a,i=>r(i)]}class it extends re{constructor(t){super(),le(this,t,ot,st,V,{})}}new it({target:document.getElementById("app")});
